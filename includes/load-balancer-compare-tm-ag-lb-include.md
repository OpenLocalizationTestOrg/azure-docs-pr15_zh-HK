## <a name="load-balancer-differences"></a>负载平衡器的区别

有各种不同的选项将使用 Microsoft Azure 的网络通信分发。 这些选项的工作方式不同，具有不同的功能集，并且支持不同的方案。 他们可以每个用于隔离，或将它们合并。

- **Azure 负载平衡器**工作在传输层 (OSI 网络引用堆栈中第 4 层)。 它跨实例相同的 Azure 数据中心中运行的应用程序提供网络级分布的流量。

- **应用程序网关**工作在应用层 (第 7 层 OSI 网络引用堆栈中)。 它充当一个反向代理服务器服务，终止客户端连接，并将请求转发到后端终结点。

- 在 DNS 级别工作**流量管理器**。  它使用 DNS 响应最终用户将流量引导至遍布全球的终结点。 客户端连接到这些终结点直接。

下表总结了每个服务提供的功能︰

| 服务 | Azure 负载平衡器 | 应用程序网关 | 通信管理器 |
|---|---|---|---|
|技术| 传输层 (第 4 层) | 应用程序级别 (第 7 层) | DNS 级别 |
| 支持的应用程序协议 | 任何 | HTTP 和 HTTPS |  任何 （HTTP 端点，则需要终结点监视） |
| 终结点 | 虚拟机和云服务的 azure 角色实例 | 任何 Azure 内部 IP 地址或公共互联网 IP 地址 | Azure 的虚拟机、 云服务、 Azure 的 Web 应用程序和外部端点 |
| Vnet 支持 | 可用于两个互联网对称和内部 (Vnet) 应用程序 | 可用于两个互联网对称和内部 (Vnet) 应用程序 |    仅支持面向 Internet 的应用程序 |
终结点监视 | 通过探测支持 | 通过探测支持 | 通过 HTTP/HTTPS 获取支持 | 

Azure 负载平衡器和应用程序网关路由网络通信的终结点，但它们具有不同使用方案到哪个通信流来处理。 下表可帮助了解两个负载平衡器之间的区别︰

| 类型 | Azure 负载平衡器 | 应用程序网关 |
|---|---|---|
| 协议 | UDP/TCP | HTTP / HTTPS |
| 预留 IP | 支持 | 不受支持 | 
| 负载平衡模式 | 5 tuple(source IP, source port, destination IP, destination port, protocol type) | 循环调度法<br>基于 URL 的路由 | 
| 负载平衡模式 (源 IP / 粘滞会话) |  2 元 （来源 IP 和目标 IP）、 三元 （来源 IP、 目标 IP 和端口）。 可以放大或缩小基础上的虚拟机数量 | 基于 cookie 的相似性<br>基于 URL 的路由 |
| 健康探测器 | 默认值︰ 探测间隔-15 秒。 采取轮换︰ 2 连续失败。 支持用户定义探测器 | 空闲的探测时间间隔 30 秒。 5 连续实时通信故障或在空闲模式下的单个探测器故障后转。 支持用户定义探测器 | 
| SSL 卸载 | 不受支持 | 支持 | 
  