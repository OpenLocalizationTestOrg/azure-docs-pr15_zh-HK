<properties
    pageTitle="分析在 Azure CDN 的边缘性能 |Microsoft Azure"
    description="分析在 Microsoft Azure CDN 中的边缘节点性能。 边缘性能分析提供精确的信息流量和带宽使用量 CDN。"
    services="cdn"
    documentationCenter=""
    authors="camsoper"
    manager="erikre"
    editor=""/>

<tags
    ms.service="cdn"
    ms.workload="tbd"
    ms.tgt_pltfrm="na"
    ms.devlang="na"
    ms.topic="article"
    ms.date="07/28/2016"
    ms.author="casoper"/>

# <a name="analyze-edge-node-performance-in-microsoft-azure-cdn"></a>在 Microsoft Azure CDN 中的边缘节点性能分析

[AZURE.INCLUDE [cdn-premium-feature](../../includes/cdn-premium-feature.md)]

## <a name="overview"></a>概述
边缘性能分析提供精确的信息流量和带宽使用量 CDN。 然后使用此信息来生成趋势的统计数据，使您可以深入了解您的资产如何被缓存，并发送给您的客户端。 反过来，这样就可以形成一种战略上如何优化您的内容提供，以确定问题应是处理更好地利用 CDN。 这样一来，不仅能够提高数据的传递性能，而且还将能够降低 CDN 成本。

> [AZURE.NOTE] 所有报表都使用 UTC/格林威治标准时间表示法指定日期/时间时。

## <a name="reports-and-log-collection"></a>报告和日志收集

它可以生成有关其报告之前，必须由边缘性能分析模块收集 CDN 活动数据。 此集合过程发生后一天，它涵盖了发生在前一天的活动。 这意味着，报告统计信息时它处理的并不一定表示当天的统计信息的样本包含当天的完整的数据集。 这些报告的主要功能是评估性能。 他们不应使用记帐的目的或精确的数字统计。

> [AZURE.NOTE] 原始数据从其生成边缘性能分析报告可至少 90 天。

## <a name="dashboard"></a>仪表板

仪表板边缘的性能分析跟踪当前和历史 CDN 通信，通过图表和统计信息。 使用此面板来检测您的帐户的 CDN 通信性能的近期和长期趋势。

此仪表板由以下内容组成︰

* 交互式图表，使可视化的关键指标和趋势。
* 为关键指标和趋势提供了一种长期模式时间线。
* 关键指标和统计信息，如何我们 CDN 网络可以提高网站流量测量的整体性能、 使用情况和效率。

### <a name="accessing-the-edge-performance-dashboard"></a>访问边缘的性能控制板

1. 从 CDN 配置文件刀片式服务器，请单击**管理**按钮。

    ![CDN 配置文件刀片式服务器管理按钮](./media/cdn-edge-performance/cdn-manage-btn.png)

    CDN 管理门户打开。

2. 悬停在**分析**选项卡，然后悬停在**边缘性能分析**飞出。  单击**操控板**上的。

    边缘节点分析仪表板会显示。

### <a name="chart"></a>图表

仪表板中包含图表，显示它的正下方的时间轴中选定时间段内跟踪指标。  直接在图表下方显示时间线图表的最后一个向上 CDN 活动的两年。

#### <a name="using-the-chart"></a>使用图表

* 默认情况下，将插入图表过去 30 天缓存效率比率。
* 每天逐份打印的数据生成图表。
* 将鼠标悬停在折线图上一天将指示日期和度量的值在该日期。
* 单击突出显示周末切换浅灰色的垂直条表示周末到图表上的重叠部分。 这种类型的叠加可用于标识上周末的流量模式。
* 单击查看一年以前以切换到图表在同一时间段上一年的活动覆盖。 这种类型的比较提供了深入了解长期 CDN 使用模式。 在图表的右上角包含图例指示每个线图的颜色代码。

#### <a name="updating-the-chart"></a>更新图表

* 时间范围︰ 执行以下某项︰
    * 在时间轴中选择所需的区域。 将对应于所选的时间段的数据更新图表。
    * 双击图表以显示所有可用的历史数据，最多两年。
* 标准︰ 单击图表图标旁边的所需的跃点数。 与相应指标的数据，则刷新图表和时间线。


### <a name="key-metrics-and-statistics"></a>关键指标和统计数据

#### <a name="efficiency-metrics"></a>效率标准

这些度量标准的目的是查看缓存效率是否得到提高。 从缓存效率所带来的主要益处是︰

* 这可能会导致在源服务器上的负载减少︰
    * 提高 web 服务器的性能。
    * 降低了运营成本。
* 由于将直接从 CDN 提供更多的请求，提高了数据传送加速。

字段 | 说明
------|------------
缓存的效率 | 指示已从缓存中提供的数据传输的百分比。 此度量度量值时所请求的内容的缓存版本是直接从 CDN （边缘服务器） 提供向请求 （例如，web 浏览器）
击中率 | 指示已从缓存提供的请求的百分比。 此度量度量值时所请求的内容的缓存版本所提供服务的 CDN （边缘服务器） 直接向请求 （例如，web 浏览器）。
%的远程字节的任何缓存配置 | 表示已不会绕过缓存功能 （HTTP 规则引擎） 由于缓存的 cdn （边缘服务器） 提供来自源服务器的通信量的百分比。
%的远程字节的缓存过期 | 陈旧的内容重新验证的结果表明已对 CDN （边缘服务器） 提供从原始服务器的通信量的百分比。

#### <a name="usage-metrics"></a>使用情况指标

这些度量标准的目的是深入了解下面的削减成本措施︰

* 通过 CDN 运营成本降至最低。
* 通过缓存效率和压缩的 CDN 支出减少。

> [AZURE.NOTE] 通信卷数量表示的比率和百分比，计算中使用和可能仅显示部分总的通信对于大批量客户的通讯。

字段 | 说明
------|------------
输出的平均字节 | 指示针对每个请求从 CDN （边缘服务器） 提供给请求者 （例如，web 浏览器） 传送的字节数的平均数。
没有缓存配置字节率 | 指示从 CDN （边缘服务器） 提供给请求者 （例如，web 浏览器） 不会由于绕过缓存功能缓存的通信量的百分比。
压缩的字节的速率 | 以压缩格式指示从 CDN （边缘服务器） 发送到请求者 （例如，web 浏览器） 的通信量的百分比。
输出字节 | 指示数据，以字节为单位，已从 CDN （边缘服务器） 发送到请求者 （例如，web 浏览器） 的数量。  
中的字节数 | 指示从申请者 （例如，web 浏览器） 发送的数据，以字节为单位，量 CDN （边缘服务器）。
字节远程 | 指示中的数据量，CDN 和客户来源服务器的 cdn （边缘服务器） 发送的字节数。

#### <a name="performance-metrics"></a>绩效指标

这些指标旨在跟踪整体 CDN 性能为您的流量。

字段 | 说明
------|------------
传输速率 | 该值指示的内容已转给从 CDN 申请者的平均速率。
持续时间 | 指示的平均时间，以毫秒为单位，花费为请求者 （例如，web 浏览器） 提供资产。
压缩的请求速率 | 以压缩格式指示从 CDN （边缘服务器） 发送到请求者 （例如，web 浏览器） 的命中的百分比。
4xx 错误率 | 指示生成 4xx 状态代码的命中的百分比。
5xx 错误速率 | 指示生成一个 5xx 状态代码的命中的百分比。
命中次数 | 指示对 CDN 内容的请求数。

#### <a name="secure-traffic-metrics"></a>安全通信指标

这些指标旨在跟踪 CDN HTTPS 通信的性能。

字段 | 说明
------|------------
保护缓存效率 | 指示数据从缓存转移所提供服务的 HTTPS 请求的百分比。 此度量度量值时所请求的内容的缓存版本是直接从 CDN （边缘服务器） 中向请求 （例如，web 浏览器） 提供通过 HTTPS。
安全传输速率 | 通过 HTTPS 指示内容被传输的 CDN （边缘服务器） 从申请者 （如 web 服务器） 的平均速率。
安全的平均持续时间 | 指示的平均时间，以毫秒为单位，所用的资产交给通过 HTTPS 请求者 （例如，web 浏览器）。
安全的点击次数 | 指示对 CDN 内容的 HTTPS 请求数。
安全输出字节 | 指示的 HTTPS 通信量，以字节为单位，已从 CDN （边缘服务器） 发送到请求者 （例如，web 浏览器）。

## <a name="reports"></a>报告

在此模块中的每个报表包含的图表和带宽和流量用法不同类型指标的统计数据 （例如，HTTP 状态代码，缓存状态代码，请求 URL，等等。）。 要深入地探讨如何为您的客户端所提供内容并调整 CDN 的行为来改善数据的传递性能，可以使用此信息。

### <a name="accessing-the-edge-performance-reports"></a>访问边缘性能报告

1. 从 CDN 配置文件刀片式服务器，请单击**管理**按钮。

    ![CDN 配置文件刀片式服务器管理按钮](./media/cdn-edge-performance/cdn-manage-btn.png)

    CDN 管理门户打开。

2. 悬停在**分析**选项卡，然后悬停在**边缘性能分析**飞出。  单击**HTTP 大型对象**。

    在边缘节点分析报告屏幕显示。

报告 | 说明
-------|------------
每日摘要 | 允许您查看每日流量趋势一段指定的时间段。 在此关系图上的每个栏代表特定日期。 栏的大小表示发生在这一天的总次数。
每小时的摘要 | 允许您查看在指定的时间段内的每小时流量趋势。 在此关系图上的每个栏表示一个小时内，在某一特定日期。 栏的大小表示在该时间内发生的总次数。
协议 | 显示的 HTTP 和 HTTPS 协议之间的通信的细目。 圆环图表示的每种类型的协议出现的命中的百分比。
HTTP 方法 | 允许您快速了解正在使用的方法的 HTTP 的请求数据。 通常，最常见的 HTTP 请求方法是 GET，头部和开机自检。 圆环图表示的每种类型的 HTTP 请求方法出现的命中的百分比。
Url | 包含一个图表，显示前 10 个请求的 Url。 对于每个 URL 显示为一条。 栏的高度指示报告所涵盖的时间范围内生成特定 URL 的多少点击。 排名前 100 位的统计信息请求 Url 显示此图形的正下方。
Cname | 包含一个图表，显示的顶部 10 Cname 用于请求的时间资产范围的报表。 排名前 100 位的统计信息请求 Cname 直接示此关系图中。
起源 | 包含一个图表，显示顶部 10 CDN 或客户原始服务器从其资产请求指定的一段时间。 排名前 100 位的统计信息请求 CDN 或客户源服务器将显示此图的正下方。 通过目录名称选项中定义的名称来标识客户原始服务器。
Geo 的 Pop | 显示您的通信中有多少通过进行传送特定点--存在 (POP)。 三个字母缩写表示我们 CDN 网络中的 POP。
客户端 | 包含一个图表，显示前 10 个客户端请求指定的一段时间的资产。 本报告的目的，被视为源自相同的 IP 地址的所有请求来自同一客户端。 此图的正下方显示前 100 个客户端统计信息。 此报告可用于为前的客户端确定下载活动模式。
高速缓存状态 | 提供了详细的分解的缓存行为，可能会发现对于改善总体的最终用户体验的方法。 以来最快的性能来自于高速缓存命中次数，您可以优化数据传递速度，通过最小化缓存未命中和过期的缓存命中。
无详细信息 | 包含一个图表，显示前 10 个 Url 的资产为其缓存内容新鲜度不检查指定的一段时间。 对于这些类型的资产上 100 Url 的统计数据显示此图的正下方。
CONFIG_NOCACHE 的详细信息 | 包含一个图表，显示前 10 个 Url 的是客户的 CDN 配置未缓存的资产。 这些类型的资产而直接从原始服务器提供服务。 对于这些类型的资产上 100 Url 的统计数据显示此图的正下方。
无缓存的详细信息 | 包含一个图表，显示前 10 个 Url 的资产，不能由于请求标头数据缓存。 对于这些类型的资产上 100 Url 的统计数据显示此图的正下方。
TCP_HIT 的详细信息 | 包含一个图表，显示从缓存提供立即的资产的前 10 个 Url。 对于这些类型的资产上 100 Url 的统计数据显示此图的正下方。
TCP_MISS 的详细信息 | 包含一个图表，显示前 10 个 Url 的缓存状态为 TCP_MISS 的资产。 对于这些类型的资产上 100 Url 的统计数据显示此图的正下方。
TCP_EXPIRED_HIT 的详细信息 | 包含一个图表，显示直接从 POP 被提供的陈旧资产的顶部 10 个 Url。 对于这些类型的资产上 100 Url 的统计数据显示此图的正下方。
TCP_EXPIRED_MISS 的详细信息 | 包含一个图表，显示顶部 10 个 Url 的陈旧资产不得不从原始服务器中检索一个新版本。 对于这些类型的资产上 100 Url 的统计数据显示此图的正下方。
TCP_CLIENT_REFRESH_MISS 的详细信息 | 包含一个条形图，显示来自源服务器由于无缓存请求从客户端检索到资产的前 10 个 Url。 此图表的正下方显示顶部 100 的这类请求 Url 的统计数据。
客户端请求类型 | 指示请求所做的 HTTP 客户端 （例如，浏览器） 的类型。 此报表包含的油炸圈饼图表，提供了某种意义上讲，对请求的处理方式。 为每个请求类型的带宽和流量信息图表下方显示。
用户代理 | 包含以条形图显示的顶部 10 个用户代理来请求您通过我们的 CDN 的内容。 通常，一个用户代理是 web 浏览器、 媒体播放器或手机浏览器。 此图表的正下方显示的顶部 100 用户代理统计信息。
引用网站 | 包含以条形图显示前 10 个引用网站通过我们的 CDN 的内容。 通常情况下，引用是 web 页面或资源链接到您的内容的 URL。 排名前 100 位排列的图形下面提供了详细的信息。
压缩类型 | 包含冲破请求资产是否已压缩我们的边缘服务器由圆环图。 通过使用的压缩类型压缩资产的百分比细分。 对于每个压缩类型和状态图形下面提供了详细的信息。
文件类型 | 包含显示已通过为您的帐户我们 CDN 请求前 10 的文件类型的条形图。 对于本报告而言，文件类型定义由资产的文件扩展名以及互联网介质类型 (如.html \[html 文本/\]，.htm\[文本/html\]，.aspx \[html 文本/\]，等等。)。 前 100 的文件类型的情况下，关系图下方提供详细的信息。
唯一的文件 | 包含图形绘制指定的一段时间在某一天的请求的唯一资产总数。
令牌身份验证摘要 | 包含请求的资源已受基于令牌的身份验证提供的快速概述的饼图。 受保护的资产显示在图表根据其尝试进行身份验证的结果。
令牌身份验证拒绝详细信息 | 包含使您可以查看已被拒绝，因为基于令牌的身份验证前 10 个请求以条形图。
HTTP 响应代码 | 细分的 HTTP 状态代码 (如 200 确定，403 禁止访问，404 找不到，等)，通过我们的边缘服务器发送到 HTTP 客户端。 饼图可以快速评估您的资产所提供服务的方式。 为每个关系图下方的响应代码提供了详细的统计数据。
404 错误 | 包含允许您查看导致找不到 404 响应代码顶部 10 个请求以条形图。
403 错误 | 包含允许您查看导致 403 禁止访问响应代码顶部 10 个请求以条形图。 请求被拒绝客户源服务器或边缘服务器上我们 POP 时发生的 403 禁止访问响应代码。
4xx 错误 | 包含允许您查看导致 400 范围内的响应代码顶部 10 个请求以条形图。 从本报告排除是 403 找不到和 404 禁止响应代码。 通常情况下，请求将被拒绝作为客户端错误结果时发生 4xx 响应代码。
504 错误 | 包含允许您查看导致 504 的网关超时响应代码顶部 10 个请求以条形图。 HTTP 代理服务器尝试与另一台服务器通讯时发生超时时发生的 504 网关超时响应代码。 如果我们 CDN，504 的网关超时响应代码通常发生在边缘服务器不能建立与客户的原始服务器的通信。
502 错误 | 包含允许您查看导致 502 网关错误响应代码顶部 10 个请求以条形图。 HTTP 代理服务器之间发生 HTTP 协议失败时发生的 502 网关错误响应代码。 如果我们 CDN，502 网关错误响应代码通常发生在客户源服务器返回到边缘服务器响应无效。 无法分析或是否不完整，响应是无效的。
5xx 错误 | 包含允许您查看导致 500 范围内的响应代码顶部 10 个请求以条形图。  从本报告排除为 502 错误的网关和 504 网关超时响应代码。

## <a name="see-also"></a>请参见
* [Azure CDN 概述](cdn-overview.md)
* [在 Microsoft Azure CDN 的实时统计](cdn-real-time-stats.md)
* [重写默认 HTTP 行为使用规则引擎](cdn-rules-engine.md)
* [高级的 HTTP 报告](cdn-advanced-http-reports.md)
