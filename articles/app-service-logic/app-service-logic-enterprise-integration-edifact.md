<properties 
    pageTitle="企业集成与 EDIFACT |Microsoft Azure" 
    description="了解如何使用 EDIFACT 协议创建逻辑应用程序" 
    services="logic-apps" 
    documentationCenter=".net,nodejs,java"
    authors="jeffhollan" 
    manager="erikre" 
    editor="cgronlun"/>

<tags 
    ms.service="app-service-logic" 
    ms.workload="integration" 
    ms.tgt_pltfrm="na" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.date="07/26/2016" 
    ms.author="jonfan"/>

# <a name="enterprise-integration-with-edifact"></a>与 EDIFACT 的企业集成 

> [AZURE.NOTE] 此页介绍了 EDIFACT 功能的应用程序逻辑。 X12 的信息，请单击[此处](app-service-logic-enterprise-integration-x12.md)。

## <a name="create-an-edifact-agreement"></a>创建了 EDIFACT 协议 
您可以交换 EDIFACT 消息之前，您需要创建了 EDIFACT 协议，并将其存储在您的集成帐户。 以下步骤将引导您完成创建 EDIFACT 协议的过程。

### <a name="heres-what-you-need-before-you-get-started"></a>以下是您需要在开始之前
- 在 Azure 订阅定义的[集成帐户](./app-service-logic-enterprise-integration-accounts.md)  
- 至少两个[合作伙伴](./app-service-logic-enterprise-integration-partners.md)集成帐户中已定义了  

>[AZURE.NOTE]创建一个协议，消息您将接收/发送与合作伙伴中的内容必须匹配的协议类型。    


您已经[创建了一个集成帐户](./app-service-logic-enterprise-integration-accounts.md)并[添加合作伙伴](./app-service-logic-enterprise-integration-partners.md)后，可以按照下面的步骤创建 EDIFACT 协议︰  

### <a name="from-the-azure-portal-home-page"></a>从 Azure 门户主页

在您登录到[Azure 门户](http://portal.azure.com "Azure 门户")︰  
1. 从左侧的菜单中选择**浏览**。  

>[AZURE.TIP]如果您看不到**浏览**链接，您可能需要首先展开该菜单。 这样做的选择**显示菜单**链接，它位于折叠菜单的左上方。  

![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-0.png)    
2. 筛选器的搜索框中键入*的集成*，然后从结果列表中选择**集成帐户**。       
![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-1-3.png)    
3. 在打开**集成帐户**刀片式服务器，选择将在其中创建该协议集成帐户。 如果您看不到任何集成帐户列表，[创建一个第一个](./app-service-logic-enterprise-integration-accounts.md "All about integration accounts")。  
![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-1-4.png)  
4.  选择**协议**麻将牌。 如果您看不到平铺的协议，将第一次对其进行添加。   
![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-1-5.png)     
5. 打开刀片式服务器协议中选择**添加**按钮。  
![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-agreement-2.png)  
6. 输入您的协议的**名称**，然后 EDIFACT、**主机伙伴**、**主机标识**、**来宾合作伙伴**、**来宾身份**，打开刀片式服务器协议中选择**协议类型**。  
![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-1.png)  
7. 设置协议属性之后，选择**接收设置**来配置此协议接收到的邮件的处理方式。  
8. 接收设置控件分为以下部分中，包括标识符、 确认、 架构、 控制号、 有效性、 内部设置和批处理。 配置基于您交换消息的伙伴协议的这些属性。 下面是这些控件的视图，根据要如何找出并处理传入消息本协议将其配置︰  
![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-2.png)  
9. 选择**确定**按钮以保存您的设置。  

### <a name="identifiers"></a>标识符

|属性|说明 |
|---|---|
|UNB6.1 （收件人参考密码）|请输入一个字母数字值，取值范围为 1 到 14 个字符之间。|
|UNB6.2 （收件人引用限定符）|请输入一个字符的最小和最大的两个字符的字母数字值。|

### <a name="acknowledgments"></a>确认 

|属性|说明 |
|----|----|
|接收消息 （控制器二维）|选中此复选框可交换的发件人返回技术的控制器 （二维） 确认。 确认发送到交换发件人根据该协议发送的设置。|
|确认 （控制器二维）|选择此复选框可交换的发件人确认返回功能的控制器 （二维） 确认发送到交换发件人根据该协议发送的设置。|

### <a name="schemas"></a>架构

|属性|说明 |
|----|----|
|UNH2.1 （类型）|选择交易记录集类型。|
|UNH2.2 （版）|输入消息的版本号。 （最小值、 一个字符; 最多，三个字符）。|
|UNH2.3 （版）|输入消息的发布版本号。 （最小值、 一个字符; 最多，三个字符）。|
|UNH2.5 （相关联的分配代码）|输入所分配的代码。 （最多，为 6 个字符。 必须为字母数字）。|
|UNG2.1 (应用程序发件人 ID)|输入包含一个字符的最小和最多 35 个字符的字母数字值。|
|UNG2.2 （应用程序发送方代码限定符）|请输入最多包含四个字符的字母数字值。|
|架构|选择您要使用从您的集成关联帐户以前上载的架构。|

### <a name="control-numbers"></a>控制号

|属性|说明 |
|----|----|
|不允许交换控制编号重复项|选中此复选框可阻止重复交换。 如果选中，EDIFACT 解码操作检查收到交换的交换控制编号 (UNB5) 与先前处理的交换控制编号不匹配。 如果检测到匹配项，则不处理交换。
|检查重复的 UNB5 每 （天）|如果您选择不允许重复交换控制号，您可以指定的天数为适当的值提供了**检查重复 UNB5 每 （天）**选项，通过执行该检查。|
|不允许组控制编号重复项|选中此复选框可阻止使用重复的组合控制号 (UNG5) 的交换。|
|不允许事务组控件重复项|选中此复选框可阻止使用重复的事务集中控制号 (UNH1) 的交换。|
|EDIFACT 确认控制编号|若要指定用于确认事务集参考编号，输入的值前缀、 参考编号的范围和一个后缀。|

### <a name="validations"></a>验证

|属性|说明 |
|----|----|
|消息类型|指定的消息类型。 完成后验证中的每一行，另一个将被自动添加。 如果不指定了任何规则，则行标记为进行验证，则使用默认值。|
|EDI 验证|选中此复选框可在 EDI 架构、 长度限制、 空数据元素和尾部分隔符的属性所定义的数据类型上执行 EDI 验证。|
|扩展的验证|选中此复选框可以启用扩展 (XSD) 验证交换发件人接收的交换。 这包括验证字段长度、 可选性和除了 XSD 验证数据类型的重复次数。|
|允许前导/结尾零|选择**允许**以允许前导/结尾零;**NotAllowed**为不允许前导/结尾零，或**修剪**修剪前导零和尾随零。|
|剪裁前导/结尾零|选中此复选框可修剪任何前导或尾随零|
|尾部分隔符策略|如果您不想允许来自交换的发件人收到交换中的尾随分隔符，分隔符，请选择**不允许**。 如果交换包含尾随分隔符，分隔符，它声明无效。 选择**可选**接受交换带有或不带尾随分隔符，分隔符。 如果收到的交换必须包含尾随分隔符，分隔符，请选择**强制性**。|

### <a name="internal-settings"></a>内部设置

|属性|说明 |
|----|----|
|如果允许尾随分隔符，创建空 XML 标记|选中此复选框可以具有包括尾随分隔符的空 XML 标记交换发件人。|
|入站批处理方式处理|选项包括︰</br></br>**剥离互换作为事务集的挂起事务集错误**︰ 分析通过对该事务集应用相应的信封设置交换到单独的 XML 文档中每个交易记录。 使用此选项，如果交换中设置一个或多个事务未通过验证，则只有这些交易记录集都将被挂起。 剥离互换为交易记录设置的错误暂停交换︰ 分析通过应用相应的信封设置交换到单独的 XML 文档中每个交易记录。 使用此选项，如果交换中设置一个或多个事务验证失败，然后在整个交换将被挂起。</br></br>**保留的交换-挂起事务集错误**︰ 保证交换完好无损，创建用于在整个批交换 XML 文档。 使用此选项，如果交换中设置一个或多个事务未通过验证，则只有这些交易记录集时，挂起，处理所有其他交易记录集。</br></br>**保留的交换-挂起交换错误**︰ 保证交换完好无损，创建用于在整个批交换 XML 文档。 使用此选项，如果交换中设置一个或多个事务验证失败，则整个交换被挂起。|

您的协议就可以处理传入消息符合您选择的设置。

配置处理发送给合作伙伴的邮件设置︰  
10. 选择**发送设置**来配置此协议发送消息的处理方式。  

发送设置控件分为以下各节，其中包括标识符、 确认、 架构、 信封、 字符集和分隔符、 控制号和验证。 

下面是这些控件的视图。 请根据您希望如何处理的消息发送给该协议的合作伙伴的选择︰   
![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-3.png)    
11. 选择**确定**按钮以保存您的设置。  

### <a name="identifiers"></a>标识符
|属性|说明 |
|----|----|
|UNB1.2 （语法版本）|选择一个介于**1**和**4**之间的值。|
|UNB2.3 （发件人反向路由地址）|输入包含至少一个字符，最多 14 个字符的字母数字值。|
|UNB3.3 （反向路由收件人地址）|输入包含至少一个字符，最多 14 个字符的字母数字值。|
|UNB6.1 （收件人参考密码）|输入包含最少的一个，最多 14 个字符的字母数字值。|
|UNB6.2 （收件人引用限定符）|请输入一个字符的最小和最大的两个字符的字母数字值。|
|UNB7 (应用程序引用 ID)|输入包含至少一个字符，最多 14 个字符的字母数字值|

### <a name="acknowledgment"></a>确认
|属性|说明 |
|----|----|
|接收消息 （控制器二维）|如果托管的合作伙伴希望接收接收技术的控制器 （二维） 确认，请选中此复选框。 此设置指定承载的同伴，他发送邮件，，从访客伙伴请求确认。|
|确认 （控制器二维）|如果托管的合作伙伴希望接收功能的控制器 （二维） 确认，请选中此复选框。 此设置指定承载的同伴，他发送邮件，，从访客伙伴请求确认。|
|生成已接受交易记录设置为 SG1/SG4 循环|如果您选择请求功能确认，选择此复选框可强制代 SG1/SG4 循环中接受交易记录集功能控制器二维确认。|

### <a name="schemas"></a>架构
|属性|说明 |
|----|----|
|UNH2.1 （类型）|选择交易记录集类型。|
|UNH2.2 （版）|输入消息的版本号。|
|UNH2.3 （版）|输入消息的发布版本号。|
|架构|选择要使用的架构。 架构位于集成帐户。 若要访问您的架构，先于逻辑应用程序链接集成帐户。|

### <a name="envelopes"></a>信封
|属性|说明 |
|----|----|
|UNB8 （处理优先级代码）|输入一个按字母顺序排列的值不是多个字符长。|
|UNB10 （通讯协议）|输入包含至少一个字符，最多 40 个字符的字母数字值。|
|UNB11 （测试指示器）|选中此复选框以指示交换生成测试数据|
|应用 UNA 段 （服务字符串建议）|选中此复选框可以生成 UNA 段交换发送。|
|应用 UNG 段 （函数组标题）|选中此复选框可以创建来宾伙伴发送的消息中的职能组页眉的分组段。 使用以下值以创建 UNG 段︰</br></br>对于**UNG1**，请输入一个字符的最小和最多六个字符的字母数字值。</br></br>对于**UNG2.1**，请输入一个字符的最小和最多 35 个字符的字母数字值。</br></br>对于**UNG2.2**，输入最多包含四个字符的字母数字值。</br></br>对于**UNG3.1**，请输入一个字符的最小和最多 35 个字符的字母数字值。</br></br>对于**UNG3.2**，输入最多包含四个字符的字母数字值。</br></br>对于**UNG6**，请输入一个最少和最多三个字符的字母数字值。</br></br>对于**UNG7.1**，请输入至少一个字符，最多三个字符的字母数字值。</br></br>对于**UNG7.2**，请输入至少一个字符，最多三个字符的字母数字值。</br></br>对于**UNG7.3**，输入具有最少 1 个字符，最多为 6 个字符的字母数字值。</br></br>对于**UNG8**，请输入至少一个字符，最多 14 个字符的字母数字值。|

### <a name="character-sets-and-separators"></a>字符集和分隔符
以外的字符集，则可以输入一组不同的分隔符，从而可用于每种消息类型。 如果给定的消息架构未指定字符集，则使用默认字符集。

|属性|说明 |
|----|----|
|UNB1.1 （标识符）|选择将应用于传出交换 EDIFACT 字符集。|
|架构|从下拉列表中选择一个架构。 在完成每一行将添加一个新行。 选定的架构中，请选择设置要使用的分隔符︰</br></br>**组件元素分隔符**– 输入一个字符来分隔复合数据元素。</br></br>**数据元素分隔符**– 输入一个字符来分隔中复合数据元素的简单的数据元素。</br></br></br></br>**替换字符**– 选中此复选框，如果有效负载数据中包含的字符，也用作数据、 段落或组件分隔符。 然后，您可以输入替换字符。 当生成出站 EDIFACT 消息，有效载荷数据中的分隔符字符的所有实例都替换指定的字符。</br></br>**段终止符**– 输入一个字符来指示 EDI 段结束。</br></br>**后缀**– 选择用于段标识符的字符。 如果您指定一个后缀，段终止符数据元素可以为空。 如果段终止符留空，则必须指定一个后缀。|

### <a name="control-numbers"></a>控制号
|属性|说明 |
|----|----|
|UNB5 （交换控制编号）|请输入一个前缀，交换的控制编号，和一个后缀值的范围。 这些值用于生成传出交换。 前缀和后缀是可选的;控制号是必需的。 控件将增加为每个新消息;前缀和后缀将保持不变。|
|UNG5 （分组控制编号）|请输入一个前缀，交换的控制编号，和一个后缀值的范围。 这些值用于生成组数目。 前缀和后缀是可选的;控制号是必需的。 控件将增加为每个新消息直到达到最大值;前缀和后缀将保持不变。|
|UNH1 （邮件头引用编号）|请输入一个前缀，交换的控制编号，和一个后缀值的范围。 这些值用于生成消息标头的参考编号。 前缀和后缀是可选的;参考号是必需的。 参考编号将增加为每个新消息;前缀和后缀将保持不变。|

### <a name="validations"></a>验证
|属性|说明 |
|----|----|
|消息类型|选择此选项将启用交换接收器上的验证。 此验证执行事务组数据元素，验证数据类型、 长度限制和空数据元素和培训分隔符 EDI 的验证。|
|EDI 验证|选中此复选框可在 EDI 架构、 长度限制、 空数据元素和尾部分隔符的属性所定义的数据类型上执行 EDI 验证。|
|扩展的验证|选择此选项可启用扩展的验证交换发件人接收的交换。 这包括验证字段长度、 可选性和除了 XSD 验证数据类型的重复次数。 您可以不启用 EDI 验证情况下启用扩展验证 （或者相反）。|
|允许前导/结尾零|选择此选项以指定从当事方接收 EDI 交换不会是否在 EDI 交换的数据元素不符合其由于长度要求或尾随空格，但 does 符合其长度要求，则删除这些失败验证。|
|剪裁前导/结尾零|选择此选项将剪裁前导和尾随零。|
|尾部分隔符|选择此选项以指定从当事方接收 EDI 交换不会失败验证 EDI 交换中的数据元素不符合其长度要求 （首尾） 零或尾随空格，但 does 符合其长度要求，则删除这些。</br></br>如果您不想允许来自交换的发件人收到交换中的尾随分隔符，分隔符，请选择**不允许**。 如果交换包含尾随分隔符，分隔符，它声明无效。</br></br>选择**可选**接受交换带有或不带尾随分隔符，分隔符。</br></br>如果收到的交换必须包含尾随分隔符，分隔符，请选择**强制性**。|

之后打开刀片式服务器上选择**确定**:  
12. 选择**协议**图块集成帐户刀片式服务器上的，您将看到新添加的协议列出。  
![](./media/app-service-logic-enterprise-integration-edifact/EDIFACT-4.png)   

## <a name="learn-more"></a>了解更多信息
- [了解更多有关企业集成包](./app-service-logic-enterprise-integration-overview.md "了解企业集成包")  
