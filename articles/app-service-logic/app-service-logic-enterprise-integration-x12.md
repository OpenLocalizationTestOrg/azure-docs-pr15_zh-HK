<properties 
    pageTitle="X12 和企业集成包概述 |Microsoft Azure 应用程序服务 |Microsoft Azure" 
    description="了解如何使用 X12 协议创建逻辑应用程序" 
    services="logic-apps" 
    documentationCenter=".net,nodejs,java"
    authors="msftman" 
    manager="erikre" 
    editor="cgronlun"/>

<tags 
    ms.service="app-service-logic" 
    ms.workload="integration" 
    ms.tgt_pltfrm="na" 
    ms.devlang="na" 
    ms.topic="article" 
    ms.date="07/08/2016" 
    ms.author="deonhe"/>

# <a name="enterprise-integration-with-x12"></a>与 X12 的企业集成 

>[AZURE.NOTE]逻辑应用程序的此页盖 X12 功能。 在 EDIFACT 的信息，请单击[此处](app-service-logic-enterprise-integration-edifact.md)。

## <a name="create-an-x12-agreement"></a>创建 X12 协议 
您可以交换 X12 之前的邮件，您需要创建 X12 协议并将其存储在您的集成帐户。 以下步骤将引导您完成创建 X12 的过程协议。

### <a name="heres-what-you-need-before-you-get-started"></a>以下是您需要在开始之前
- 在 Azure 订阅定义的[集成帐户](./app-service-logic-enterprise-integration-accounts.md)  
- 至少两个[合作伙伴](./app-service-logic-enterprise-integration-partners.md)集成帐户中已定义了  

>[AZURE.NOTE]当创建一个协议，协议文件中的内容必须匹配的协议类型。    


您已经[创建了一个集成帐户](./app-service-logic-enterprise-integration-accounts.md)并[添加合作伙伴](./app-service-logic-enterprise-integration-partners.md)后，您可以创建 X12 协议通过执行以下步骤︰  

### <a name="from-the-azure-portal-home-page"></a>从 Azure 门户主页

在您登录到[Azure 门户](http://portal.azure.com "Azure 门户")︰  
1. 从左侧的菜单中选择**浏览**。  

>[AZURE.TIP]如果您看不到**浏览**链接，您可能需要首先展开该菜单。 这样做的选择**显示菜单**链接，它位于折叠菜单的左上方。  

![](./media/app-service-logic-enterprise-integration-overview/overview-1.png)    
2. 筛选器的搜索框中键入*的集成*，然后从结果列表中选择**集成帐户**。       
![](./media/app-service-logic-enterprise-integration-x12/x12-1-3.png)    
3. 在打开**集成帐户**刀片式服务器，选择将在其中创建该协议集成帐户。 如果您看不到任何集成帐户列表，[创建一个第一个](./app-service-logic-enterprise-integration-accounts.md "All about integration accounts")。  
![](./media/app-service-logic-enterprise-integration-x12/x12-1-4.png)  
4.  选择**协议**麻将牌。 如果您看不到平铺的协议，将第一次对其进行添加。   
![](./media/app-service-logic-enterprise-integration-x12/x12-1-5.png)     
5. 打开刀片式服务器协议中选择**添加**按钮。  
![](./media/app-service-logic-enterprise-integration-agreements/agreement-2.png)  
6. 输入您的协议的**名称**，然后打开刀片式服务器协议中选择**协议类型**、**主机伙伴**、**主机标识**、**来宾合作伙伴**、**来宾身份**。  
![](./media/app-service-logic-enterprise-integration-x12/x12-1.png)  
7. 设置接收设置属性后，请选择**确定**按钮  
让我们继续︰  
8. 选择**接收设置**来配置此协议接收到的邮件的处理方式。  
9. 该接收设置控件分为以下各节，其中包括标识符、 确认、 架构、 信封、 控制号、 验证和内部设置。 配置基于您交换消息的伙伴协议的这些属性。 下面是这些控件的视图，根据要如何找出并处理传入消息本协议将其配置︰  
![](./media/app-service-logic-enterprise-integration-x12/x12-2.png)  

![](./media/app-service-logic-enterprise-integration-x12/x12-3.png)  
10. 选择**确定**按钮以保存您的设置。  

### <a name="identifiers"></a>标识符

|属性|说明 |
|---|---|
|ISA1 （授权限定符）|从下拉列表中选择授权限定符的值。|
|ISA2|可选。 输入授权信息的价值。 如果您输入的 ISA1 值 00 之外，则输入一个字母数字字符的最小和最大为 10。|
|ISA3 （安全识别符）|从下拉列表中选择安全限定符的值。|
|ISA4|可选。 输入安全信息的价值。 如果您输入的 ISA3 值是 00 之外，则输入一个字母数字字符的最小和最大为 10。|

### <a name="acknowledgments"></a>确认 

|属性|说明 |
|----|----|
|预期的 TA1|选中此复选框可返回到交换发件人的一个技术 (TA1) 确认。 这些确认发送到交换发件人根据该协议发送的设置。|
|预期的 FA|选中此复选框可交换的发件人返回功能 (FA) 确认。 然后，选择是否希望 997 或 999 确认，根据您正在使用的架构版本。 这些确认发送到交换发件人根据该协议发送的设置。|
|包括 AK2/IK2 循环|选中此复选框可以启用代 AK2 循环中接受交易记录集功能确认。注意︰ 仅当选定 FA 预期复选框启用此复选框。|

### <a name="schemas"></a>架构

选择为每个交易记录类型 (ST1) 和发送方应用程序 (GS2) 架构。 接收管道通过传入消息传入消息的架构和架构，在此处设置的值与您在此处设置中 ST1 和 GS2 匹配值分解传入的消息。

|属性|说明 |
|----|----|
|版本|选择 X12 版|
|交易记录类型 (ST01)|选择交易记录类型|
|发送方应用程序 (GS02)|选择发件人的应用程序|
|架构|选择您希望向我们的架构文件。 架构文件位于您集成的帐户中。|

### <a name="envelopes"></a>信封

|属性|说明 |
|----|----|
|ISA11 使用情况|使用此字段，交易记录集中指定分隔符︰</br></br>选择要使用的十进制表示法的标准标识符"。" 而不是传入 edi 文档的十进制符号接收管道。</br></br>选择重复分隔符来指定重复出现的一个简单的数据元素或重复的数据结构的分隔符。 例如，(^) 通常用作重复分隔符。 对于 HIPAA 的架构，您可以只使用 (^)。|

### <a name="control-numbers"></a>控制号

|属性|说明 |
|----|----|
|不允许交换控制编号重复项|选中此选项可阻止重复交换。 如果选中，BizTalk 服务门户检查接收到的交换的交换控制编号 (ISA13) 与交换控制编号不匹配。 如果检测到匹配，则接收管道不处理交换。<br/>如果您选择不允许重复交换控制号，您可以指定的天数通过检查重复的 ISA13 为每隔 x 天为适当的值执行的检查。|
|不允许组控制编号重复项|选中此选项可阻止使用重复的组合控制号的交换。|
|不允许事务组控件重复项|选中此选项可阻止使用重复的事务集中控制号的交换。|

### <a name="validations"></a>验证

|属性|说明 |
|----|----|
|消息类型|EDI 消息类型，如 850 采购订单或 999 实施确认。|
|EDI 验证|由 EDI 架构、 长度限制、 空数据元素和尾部分隔符的属性定义的数据类型上执行 EDI 的验证。|
|扩展的验证|如果数据类型不是 EDI，数据元素要求验证，并允许重复、 枚举和数据元素长度验证 （最小值/最大值）。|
|允许前导/结尾零|更多的空间和前导或尾随零字符都将保留。 不会删除它们。|
|尾部分隔符策略|生成有关接收互换尾随分隔符。 选项包括 NotAllowed、 可选和强制性。|

### <a name="internal-settings"></a>内部设置

|属性|说明 |
|----|----|
|将暗示十进制格式 Nn 基于 10 个数值转换|将指定为十进制数值在 BizTalk 服务门户中的中间 XML 的格式 Nn EDI 数字转换。|
|如果允许尾随分隔符，创建空 XML 标记|选中此复选框可以具有包括尾随分隔符的空 XML 标记交换发件人。|
|入站批处理方式处理|剥离互换为交易记录设置的错误上挂起事务集︰ 分析通过对该事务集应用相应的信封设置交换到单独的 XML 文档中每个交易记录。 使用此选项，如果交换中设置一个或多个事务失败验证，然后 BizTalk 服务暂停只有这些事务集。 </br></br>剥离互换为交易记录设置的错误暂停交换︰ 分析通过应用相应的信封设置交换到单独的 XML 文档中每个交易记录。 使用此选项，如果交换中设置一个或多个事务验证失败，则 BizTalk 服务暂停整个交换。</br></br>保留的交换-在错误上挂起事务集︰ 保证交换完好无损，创建用于在整个批交换 XML 文档。 使用此选项，如果 onAe 或更多的事务设置交换中失败验证，然后 BizTalk 服务暂停只有这些交易记录集，而同时可以继续处理所有其他交易记录集。</br></br>保留交换-挂起错误交换︰ 保证交换完好无损，创建用于在整个批交换 XML 文档。 使用此选项，如果交换中设置一个或多个事务验证失败，则 BizTalk 服务暂停整个交换。</br></br>|

您的协议就可以处理符合所选的架构的传入消息。

配置处理发送给合作伙伴的邮件设置︰  
11. 选择**发送设置**来配置此协议发送消息的处理方式。  

发送设置控件分为以下各节，其中包括标识符、 确认、 架构、 信封、 控制号、 字符集和分隔符和验证。 

下面是这些控件的视图。 请根据您希望如何处理的消息发送给该协议的合作伙伴的选择︰   
![](./media/app-service-logic-enterprise-integration-x12/x12-4.png)  

![](./media/app-service-logic-enterprise-integration-x12/x12-5.png)  

![](./media/app-service-logic-enterprise-integration-x12/x12-6.png)  
12. 选择**确定**按钮以保存您的设置。  

### <a name="identifiers"></a>标识符
|属性|说明 |
|----|----|
|授权限定符 (ISA1)|从下拉列表中选择授权限定符的值。|
|ISA2|输入授权信息的价值。 如果此值为 00 以外，然后输入一个字母数字字符的最小和最多 10 个。|
|安全识别符 (ISA3)|从下拉列表中选择安全限定符的值。|
|ISA4|输入安全信息的价值。 如果此值为非 00，值 (ISA4) 文本框中，然后输入一个字母数字值的最小和最多 10 个。|

### <a name="acknowledgment"></a>确认
|属性|说明 |
|----|----|
|预期的 TA1|选中此复选框可返回到交换发件人的一个技术 (TA1) 确认。 此设置指定主机合作伙伴发送邮件，从协议 》 中的来宾伙伴请求确认。 这些确认应由主机伙伴根据协议中的接收设置。|
|预期的 FA|选中此复选框可互换发件人返回功能 (FA) 确认，然后选择是否希望 997 或 999 确认，根据您正在使用的架构版本。 这些确认应由主机伙伴根据协议中的接收设置。|
|FA 版本|选择的 FA 版本|

### <a name="schemas"></a>架构
|属性|说明 |
|----|----|
|版本|选择 X12 版|
|交易记录类型 (ST01)|选择交易记录类型|
|架构|选择要使用的架构。 架构位于集成帐户。 若要访问您的架构，先于逻辑应用程序链接集成帐户。|

### <a name="envelopes"></a>信封
|属性|说明 |
|----|----|
|ISA11 使用情况|使用此字段，交易记录集中指定分隔符︰</br></br>选择要使用的十进制表示法的标准标识符"。" 而不是传入 edi 文档的十进制符号接收管道。</br></br>选择重复分隔符来指定重复出现的一个简单的数据元素或重复的数据结构的分隔符。 例如，(^) 通常用作重复分隔符。 对于 HIPAA 的架构，您可以只使用 (^)。</br>|
|重复分隔符|输入的重复分隔符|
|控制版本编号 (ISA12)|选择用于生成传出交换使用 BizTalk 服务门户 X12 标准的版本。|
|使用指示符 (ISA15)|输入信息 (I)、 (P) 的生产数据的交换上下文是否或测试数据 (T)。 EDI 接收管道提升此属性的上下文。|
|架构|您可以输入 BizTalk 服务门户如何生成将发送到发送管道的 X12 编码交换的 GS 和 ST 段。</br></br>您可以关联 GS1、 GS2，GS3、 GS4、 GS5、 GS7 和 GS8 数据元素值的交易记录类型和版本/发行数据元素的值。 当 BizTalk 服务门户确定一条 XML 消息已为交易记录类型和版本/发行元素在网格中的行中设置的值，然后填充网格的同一行中的值的传出交换信封中的 GS1、 GS2，GS3、 GS4、 GS5、 GS7 和 GS8 数据元素。 交易记录类型和版本/发行的元素的值必须是唯一的。</br></br>可选。 对 GS1，从下拉列表中选择函数代码的值。</br></br>必填。 对于 GS2，输入应用程序发送的两个字符的最小和最多 15 个字符的字母数字值。</br></br>必填。 对于 GS3，输入应用程序接收方用两个字符的最小和最多 15 个字符的字母数字值。</br></br>可选。 对于 GS4，选择 CCYYMMDD 或 yymmdd 则。</br></br>可选。 对于 GS5，选择 HHMM、 小时分秒或 HHMMSSdd。</br></br>可选。 为 GS7，从下拉列表中选择值的负责机构。</br></br>可选。 对于 GS8，输入文档标识与至少一个字符，最多 12 个字符的字母数字值。</br></br>**注意**︰ 这些是 BizTalk 服务门户进入编制的交易记录类型，如果在交换的 GS 字段中的值和版本/发行的同一行中的元素是那些与交换相关的匹配项。|

### <a name="control-numbers"></a>控制号
|属性|说明 |
|----|----|
|交换控制编号 (ISA13)|必填。 使用 BizTalk 服务门户中生成传出交换的交换控制编号输入值的范围。 输入一个数值与最少 1 个和最大为 999999999。|
|组控制编号 (GS06)|必填。 输入组控制编号应该使用 BizTalk 服务门户的数字的范围。 请输入至少一个字符，最多九个字符的数值。|
|交易记录设置控制号 (ST02)|对于交易记录设置控制号 (ST02)，输入一系列所需的中间字段的数值和字母数字值的可选前缀和后缀。 所有四个字段的最大长度是九个字符。|
|前缀|要将指定的事务设置控件使用的数字中确认的范围，请确认控件数 (ST02) 字段中输入值。 中间的两个字段的数值和字母数字值 （如果需要） 的前缀和后缀字段输入。 中间的字段是必需的并且包含数目; 最小和最大值前缀和后缀是可选的。 全部三个域的最大长度是九个字符。|
|后缀|要将指定的事务设置控件使用的数字中确认的范围，请确认控件数 (ST02) 字段中输入值。 中间的两个字段的数值和字母数字值 （如果需要） 的前缀和后缀字段输入。 中间的字段是必需的并且包含数目; 最小和最大值前缀和后缀是可选的。 全部三个域的最大长度是九个字符。|

### <a name="character-sets-and-separators"></a>字符集和分隔符
以外的字符集，则可以输入一组不同的分隔符，从而可用于每种消息类型。 如果给定的消息架构未指定字符集，则使用默认字符集。

|属性|说明 |
|----|----|
|设置要使用的字符|选择 X12 字符集来验证输入协议的属性。</br></br>**注意**︰ BizTalk 服务门户才使用此设置来验证相关的协议属性输入的值。 接收管道或发送管道将执行运行时处理时忽略此字符集属性。|
|架构|选择 （+） 符号，选择下拉列表中的架构。 选定的架构中，请选择设置要使用的分隔符︰</br></br>组件元素分隔符 – 输入一个字符来分隔复合数据元素。</br></br>数据元素分隔符 – 输入一个字符来分隔中复合数据元素的简单的数据元素。</br></br></br></br>替换字符 – 选中此复选框，如果有效负载数据中包含的字符，也用作数据、 段落或组件分隔符。 然后，您可以输入替换字符。 在生成出站时 X12 消息，用指定的字符替换数据有效负载中的分隔符字符的所有实例。</br></br>段终止符 – 输入单个字符来指示 EDI 段结束。</br></br>后缀 – 选择用于段标识符的字符。 如果您指定一个后缀，段终止符数据元素可以为空。 如果段终止符留空，则必须指定一个后缀。|

### <a name="validation"></a>验证
|属性|说明 |
|----|----|
|消息类型|选择此选项将启用交换接收器上的验证。 此验证执行 EDI 验证交易记录集数据元素，验证数据类型、 长度限制和空数据元素和尾随分隔符。|
|EDI 验证||
|扩展的验证|选择此选项可启用扩展的验证交换发件人接收的交换。 这包括验证字段长度、 可选性和除了 XSD 验证数据类型的重复次数。 您可以不启用 EDI 验证情况下启用扩展验证 （或者相反）。|
|允许前导 / 尾随零|选择此选项以指定从当事方接收 EDI 交换不会是否在 EDI 交换的数据元素不符合其由于长度要求或尾随空格，但 does 符合其长度要求，则删除这些失败验证。|
|尾部分隔符|选择此选项以指定从当事方接收 EDI 交换不会失败验证 EDI 交换中的数据元素不符合其长度要求 （首尾） 零或尾随空格，但 does 符合其长度要求，则删除这些。</br></br>如果您不想允许来自交换的发件人收到交换中的尾随分隔符，分隔符，请选择不允许。 如果交换包含尾随分隔符，分隔符，它声明无效。</br></br>选择可选接受交换带有或不带尾随分隔符，分隔符。</br></br>如果接收到的交换必须包含尾随分隔符，分隔符，请选择强制性。|

之后打开刀片式服务器上选择**确定**:  
13. 选择**协议**图块集成帐户刀片式服务器上的，您将看到新添加的协议列出。  
![](./media/app-service-logic-enterprise-integration-x12/x12-7.png)   

## <a name="learn-more"></a>了解更多信息
- [了解更多有关企业集成包](./app-service-logic-enterprise-integration-overview.md "了解企业集成包")  
